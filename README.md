# Playlistify

Playlistify is a web application that interfaces with Spotify's various APIs to build playlists democratically. Users log in to a shared event and receive notifications when a song has been suggested. If a song receives a majority of "yes" votes, it is added to the playlist and queue.

## Technologies

Playlistify's frontend is built using React and React Bootstrap to offset my poor design ability. The backend is built using the Django REST framework that serves data to the frontend. The backend will also make use of [Django Channels](https://github.com/django/channels) to implement the asynchronous voting functionality.

## Data Models

[WIP, subject to change]

### `Host` User Model (child of `django.contrib.auth.models.AbstractUser`)

The `Host` is the "administrator" role of the application. 

This role will host an event by logging in and connecting their Spotify Premium account After that, they will function identically to the `Guest` model.

Below are the fields that will likely be implemented for the `Host`.

| Field Name    | Data Type | Notes                                                                   |
|---------------|-----------|-------------------------------------------------------------------------|
| access_token  | CharField | Provided by Spotify API. Used in all future calls to Spotify endpoints. |
| refresh_token | CharField | Provided by Spotify API. Used when access_token expires.                |
| playlist_id   | CharField | Spotify-generated ID for referencing the shared playlist.               |
| event_id      | CharField | Generated by application to link Host, Event, and its Guests.           |

### `Guest` User Model (child of `django.contrib.auth.models.AbstractUser`)

The `Guest` role will allow users to participate in an event created by a `Host`. A `Guest` will use a code (like Jackbox Games) to join an event, where they can add songs and vote for suggestions.

| Field Name  | Data Type | Notes                                                         |
|-------------|-----------|---------------------------------------------------------------|
| guest_id    | CharField | Unique identifier for each guest.                             |
| event_id    | CharField | Generated by application to link Host, Event, and its Guests. |
| suggestions | JSONField | All song suggestions from guest.                              |

### Etc.

Other models that could potentially be needed:
- `Event` model: Include `playlist_id` , `host` (foreign key relation to `Host`)
- `Suggestion` model: Either to keep track of all suggestions or all successful suggestions. Include Spotify song URIs, `event_id` (foreign key relation to `Event`), etc. Could be useful for getting similar songs for suggestions from Spotify.

## Functional Areas

### Login / Register

- Allow `Host` to register, link Spotify, and host an event.
- Allow `Guest` to log in to an event using a code.

### Suggest a Song

- Allow `Guest` / `Host` to search for a song and suggest it

### Vote

- Allow `Guest` / `Host` to receive a notification when a song has been suggested and vote 'Yes' or 'No' to add the song. 

### Playlist & Playback Management

- When a song receives enough positive votes, add the song to the Spotify playlist. 
- When a song is added to the playlist, add it to the playback queue as well. 
